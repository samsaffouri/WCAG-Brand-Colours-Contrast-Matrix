<!DOCTYPE html>
<html>
<head>
	<title>Brand Colors</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<style type="text/css">
		body{
			text-align: center;
		}
		table{
			margin: 0 auto;
		}
		td{
			border: 1px solid #ccc;
			border-radius: 5px;
			width: 75px;
			height: 75px;
			text-align: center;
		}
		ul{
			list-style: none;
			padding: 0px;
		}
		li{
			display: inline-block;
			margin: 10px;
		}
		li input{
			width: 50px;
			height: 50px;
		}
		.removeBtn{
			display: none;
			margin: 10px 0;
		}
		.txt-90{
			transform: rotate(-90deg);
		}
		#arrayHere{
			margin-bottom: 100px;
		}
	</style>
</head>
<body>
	<div class="container">
	<h1>Brand Colors</h1>
	<p>Instruction text about application should be here</p>
		<button onclick="myFunction()">Add</button>
		<button onclick="CheckFunc()">check</button>
	<ul id="container">	
		<li id="color-0">
			<input type="color" name="num" id="bb" value="#000000">
			<button class="removeBtn" onclick="myRemove(this)">Remove</button>
		</li>
		<li id="color-1">
			<input type="color" name="num" value="#ffffff">
			<button class="removeBtn" onclick="myRemove(this)">Remove</button>
		</li>
	</ul>
	<div id="arrayHere"></div>
</div>
<script>
// function from https://stackoverflow.com/a/5624139/3695983
function hexToRgb(hex) {
  var shorthandRegex = /^#?([a-f\d])([a-f\d])([a-f\d])$/i;
  hex = hex.replace(shorthandRegex, function(m, r, g, b) {
    return r + r + g + g + b + b;
  });

  var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
  return result ? {
    r: parseInt(result[1], 16),
    g: parseInt(result[2], 16),
    b: parseInt(result[3], 16)
  } : null;
}

// function from https://stackoverflow.com/a/9733420/3695983                     
function luminance(r, g, b) {
  var a = [r, g, b].map(function (v) {
    v /= 255;
    return v <= 0.03928
      ? v / 12.92
    : Math.pow( (v + 0.055) / 1.055, 2.4 );
  });
  return a[0] * 0.2126 + a[1] * 0.7152 + a[2] * 0.0722;
}

function calculateRatio(cl1, cl2) {

  // read the colors and transform them into rgb format
  const color1 = cl1 ;
  const color2 = cl2 ;
  const color1rgb = hexToRgb(color1);
  const color2rgb = hexToRgb(color2);

  // calculate the relative luminance
  const color1luminance = luminance(color1rgb.r, color1rgb.g, color1rgb.b);
  const color2luminance = luminance(color2rgb.r, color2rgb.g, color2rgb.b);

  // calculate the color contrast ratio
  const ratio = color1luminance > color2luminance 
  ? ((color2luminance + 0.05) / (color1luminance + 0.05))
  : ((color1luminance + 0.05) / (color2luminance + 0.05));
 
 if(ratio < 1/4.5) {result='PASS';}else{ result= 'FAIL';}

  return ratio;
}

//----check----//	
	var x = 2;
		
function myFunction() {
		var divInp =document.createElement("li");
  		var inp = document.createElement("INPUT");
  		var rem = document.createElement("button");
  inp.setAttribute("type", "color");
  rem.setAttribute("class", "removeBtn");
  rem.innerHTML = "Remove";
  divInp.setAttribute("id", "color-"+x);
  rem.setAttribute("onclick", "myRemove(this)");
  divInp.appendChild(inp);
  divInp.appendChild(rem);
  document.getElementById("container").appendChild(divInp);
  
  //document.body.appendChild(divInp);
  x = x+1;
  return x;

}

function myRemove(el){
	var xc = document.getElementById("container").getElementsByTagName("li").length; 

	var element = el.parentElement;
	 element.remove();
	 x = x-1;
	
	for ( i = xc-2; i >= 0 ; i--){
		var elA =i +1;
		var elB ="color-" + i;
		var xcLi = document.getElementById("container").getElementsByTagName("li")[i];
		xcLi.setAttribute("id", elB);

	}

	return x;
}
	var html;	

function CheckFunc(){
	var arr = [];
	var valC ="";
	html ="";

	document.getElementById("arrayHere").innerHTML = "";
	var xc = document.getElementById("container").getElementsByTagName("li").length; 
	//html += "<table>;
	html += "<table><tr><td class='txt-90' rowspan = " + xc+1 +" >background color</td></tr><tr><td colspan = "+ xc+1 + " >Font</td></tr>";
	for (i = 0 ; i <= xc-1 ; i++){
			var cc = document.getElementById("color-"+ i);
			var cc0 = cc.getElementsByTagName("input")[0].value;
			arr.push(cc0);
		}
	for(g = 0; g < arr.length; g++){
		if (g == 0){
				html += "<tr><td></td>";	
				for (y = 0; y < arr.length; y++){
				html += "<td>" + arr[y] + "</td>";    	
	      	}
	      html += "</tr>";
		}
		if (arr.length > g > 0 ){
				html += "<tr><td>" + arr[g] + "</td>";	
				for (x = 0; x < arr.length; x++){
				compair(arr[g], arr, x);
		      	}
	      		html += "</tr>";
 
		}else{
			html += "</table>";

		} 	
	}	     
    document.getElementById("arrayHere").innerHTML = html;

}
function compair(arrX, arr){
		calculateRatio(arrX, arr[x])

		if(result == 'PASS'){

			html += "<td style='background-color:" 
			+ arrX + 
			"; color:" 
			+ arr[x] + ";'>PASS AA</td>";
		}
		else{
			html += "<td></td>";
		}

}
</script>	

</body>
<html>
